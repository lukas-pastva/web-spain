[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
loglevel=info

[program:server]
command=node /app/server/src/index.js
directory=/app/server
autostart=true
autorestart=true
startretries=3
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=NODE_ENV="production",PORT="3000",OUTPUT_DIR="%(ENV_OUTPUT_DIR)s"

[program:scraper]
command=/app/venv/bin/python /app/scraper/scraper.py
directory=/app/scraper
autostart=true
autorestart=true
startretries=3
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=OUTPUT_DIR="%(ENV_OUTPUT_DIR)s",TARGET_URL="%(ENV_TARGET_URL)s",PYTHONUNBUFFERED="1"
